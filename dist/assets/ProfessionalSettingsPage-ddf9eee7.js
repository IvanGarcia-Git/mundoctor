import{e as se,r as b,j as e,C as F,a as I,b as p,q as v,g as x,c as L,v as y,ap as te,aq as V,ar as re,i as ne,w as M,x as q,y as B,z as G,A as w,R as H,u as W,as as ie,I as $,a8 as ce,S as de,at as le,au as oe,o as ue}from"./index-75f81b91.js";import{T as me,a as xe,b as D,c as P}from"./tabs-98855ec7.js";import{S as R}from"./switch-c7df683a.js";import{P as O}from"./plus-b017b4b9.js";import{T as U}from"./trash-2-cc4f0959.js";import{D as he,a as ge,b as je,c as pe,d as be,e as fe}from"./dialog-6497f829.js";import{P as ve}from"./plus-circle-458dc8a7.js";import{S as E}from"./save-d86ddf52.js";const Ne=se("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]),ke=({worksWithInsurance:s,insuranceCompanies:l,onUpdateInsurance:c})=>{const[i,h]=b.useState(!1),[o,g]=b.useState(s),[r,n]=b.useState(l),a=()=>{c({worksWithInsurance:o,insuranceCompanies:r}),h(!1)},u=()=>{g(s),n(l),h(!1)},f=d=>{n(j=>j.includes(d)?j.filter(N=>N!==d):[...j,d])};return e.jsxs(F,{children:[e.jsx(I,{children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx(p,{children:"Aseguradoras"}),e.jsx(v,{children:"Gestiona las aseguradoras con las que trabajas"})]}),!i&&e.jsxs(x,{variant:"outline",onClick:()=>h(!0),children:[e.jsx(O,{className:"h-4 w-4 mr-2"}),"Editar"]})]})}),e.jsx(L,{children:i?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-6",children:[e.jsx(R,{id:"works-with-insurance",checked:o,onCheckedChange:g}),e.jsx(y,{htmlFor:"works-with-insurance",children:"Trabajo con aseguradoras médicas"})]}),o&&e.jsx(te,{className:"h-[300px] border rounded-md p-4",children:e.jsx("div",{className:"space-y-4",children:V.map(d=>e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(re,{id:d.id,checked:r.includes(d.id),onCheckedChange:()=>f(d.id)}),e.jsx(y,{htmlFor:d.id,children:d.name})]},d.id))})}),e.jsxs("div",{className:"flex justify-end space-x-2 mt-6",children:[e.jsx(x,{variant:"outline",onClick:u,children:"Cancelar"}),e.jsx(x,{onClick:a,children:"Guardar cambios"})]})]}):e.jsx("div",{children:s?e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Trabajas con las siguientes aseguradoras:"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:l.map(d=>{const j=V.find(N=>N.id===d);return j?e.jsx(ne,{variant:"secondary",children:j.name},j.id):null})})]}):e.jsx("p",{className:"text-muted-foreground",children:"No trabajas con aseguradoras médicas"})})})]})},we=({slots:s,onSlotsChange:l,appointmentDuration:c})=>{const i=Array.from({length:96},(r,n)=>{const a=Math.floor(n/4),u=n%4*15;return`${a.toString().padStart(2,"0")}:${u.toString().padStart(2,"0")}`}),h=()=>{const r={start:"09:00",end:"14:00"};l([...s,r])},o=r=>{const n=s.filter((a,u)=>u!==r);l(n)},g=(r,n,a)=>{const u=s.map((f,d)=>d===r?{...f,[n]:a}:f);l(u)};return e.jsxs("div",{className:"space-y-4 pl-8",children:[s.map((r,n)=>e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs(M,{value:r.start,onValueChange:a=>g(n,"start",a),children:[e.jsx(q,{className:"w-[120px]",children:e.jsx(B,{placeholder:"Inicio"})}),e.jsx(G,{children:i.map(a=>e.jsx(w,{value:a,children:a},a))})]}),e.jsx("span",{children:"a"}),e.jsxs(M,{value:r.end,onValueChange:a=>g(n,"end",a),children:[e.jsx(q,{className:"w-[120px]",children:e.jsx(B,{placeholder:"Fin"})}),e.jsx(G,{children:i.map(a=>e.jsx(w,{value:a,children:a},a))})]}),e.jsx(x,{variant:"ghost",size:"icon",onClick:()=>o(n),className:"text-destructive",children:e.jsx(U,{className:"h-4 w-4"})})]},n)),e.jsxs(x,{variant:"outline",size:"sm",onClick:h,className:"mt-2",children:[e.jsx(O,{className:"h-4 w-4 mr-2"}),"Añadir Horario"]})]})},ye=({open:s,onOpenChange:l})=>{const[c,i]=H.useState(new Date),[h,o]=H.useState(""),{toast:g}=W(),r=n=>{if(n.preventDefault(),!c||!h.trim()){g({title:"Error",description:"Por favor completa todos los campos",variant:"destructive"});return}g({title:"Bloqueo creado",description:"El bloqueo de calendario ha sido creado correctamente."}),l(!1)};return e.jsx(he,{open:s,onOpenChange:l,children:e.jsxs(ge,{className:"sm:max-w-[425px]",children:[e.jsxs(je,{children:[e.jsx(pe,{children:"Crear Bloqueo de Calendario"}),e.jsx(be,{children:"Selecciona el periodo y la razón del bloqueo (ej: vacaciones, formación, etc.)"})]}),e.jsxs("form",{onSubmit:r,className:"space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(y,{children:"Periodo"}),e.jsx(ie,{mode:"range",selected:c,onSelect:i,className:"rounded-md border"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(y,{htmlFor:"reason",children:"Motivo del bloqueo"}),e.jsx($,{id:"reason",value:h,onChange:n=>o(n.target.value),placeholder:"ej: Vacaciones de verano"})]})]}),e.jsxs(fe,{children:[e.jsx(x,{type:"button",variant:"outline",onClick:()=>l(!1),children:"Cancelar"}),e.jsx(x,{type:"submit",children:"Guardar Bloqueo"})]})]})]})})},Ce=({schedule:s,onScheduleChange:l,appointmentDuration:c,onAppointmentDurationChange:i})=>{const[h,o]=b.useState(!1),g=a=>{l({...s,[a]:{...s[a],enabled:!s[a].enabled}})},r=(a,u)=>{l({...s,[a]:{...s[a],slots:u}})},n=[{key:"monday",label:"Lunes"},{key:"tuesday",label:"Martes"},{key:"wednesday",label:"Miércoles"},{key:"thursday",label:"Jueves"},{key:"friday",label:"Viernes"},{key:"saturday",label:"Sábado"},{key:"sunday",label:"Domingo"}];return e.jsxs("div",{className:"space-y-6",children:[e.jsxs(F,{children:[e.jsxs(I,{children:[e.jsx(p,{children:"Configuración de Horario Laboral"}),e.jsx(v,{children:"Establece tus horarios de trabajo para cada día de la semana"})]}),e.jsx(L,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center space-x-4 mb-6",children:[e.jsx(y,{children:"Duración de citas:"}),e.jsxs(M,{value:c.toString(),onValueChange:a=>i(parseInt(a)),children:[e.jsx(q,{className:"w-[180px]",children:e.jsx(B,{placeholder:"Selecciona duración"})}),e.jsxs(G,{children:[e.jsx(w,{value:"15",children:"15 minutos"}),e.jsx(w,{value:"30",children:"30 minutos"}),e.jsx(w,{value:"45",children:"45 minutos"}),e.jsx(w,{value:"60",children:"1 hora"}),e.jsx(w,{value:"90",children:"1 hora 30 minutos"}),e.jsx(w,{value:"120",children:"2 horas"})]})]})]}),e.jsx("div",{className:"grid gap-6",children:n.map(({key:a,label:u})=>e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(R,{id:`enable-${a}`,checked:s[a].enabled,onCheckedChange:()=>g(a)}),e.jsx(y,{htmlFor:`enable-${a}`,children:u})]})}),s[a].enabled&&e.jsx(we,{slots:s[a].slots,onSlotsChange:f=>r(a,f),appointmentDuration:c})]},a))})]})})]}),e.jsx(F,{children:e.jsx(I,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(p,{children:"Bloqueos de Calendario"}),e.jsx(v,{children:"Gestiona periodos de vacaciones y otros bloqueos"})]}),e.jsxs(x,{variant:"outline",onClick:()=>o(!0),children:[e.jsx(ve,{className:"h-4 w-4 mr-2"}),"Nuevo Bloqueo"]})]})})}),e.jsx(ye,{open:h,onOpenChange:o})]})},Ie=()=>{const{user:s,updateUser:l}=ce(),{toast:c}=W(),[i,h]=b.useState({currentPassword:"",newPassword:"",confirmNewPassword:""}),[o,g]=b.useState({emailNewAppointments:!0,emailCancellations:!0,emailNewMessages:!1,pushNewAppointments:!0}),[r,n]=b.useState({cardNumber:"**** **** **** 1234",expiryDate:"12/26",cvc:"***",billingName:(s==null?void 0:s.name)||"Dr. Ejemplo",billingAddress:"Calle Ficticia 123, Madrid"}),[a,u]=b.useState((s==null?void 0:s.insuranceData)||{worksWithInsurance:!0,insuranceCompanies:["sanitas","adeslas","dkv"]}),[f,d]=b.useState({appointmentDuration:30,schedule:{monday:{enabled:!0,slots:[{start:"09:00",end:"14:00"},{start:"16:00",end:"20:00"}]},tuesday:{enabled:!0,slots:[{start:"09:00",end:"14:00"},{start:"16:00",end:"20:00"}]},wednesday:{enabled:!0,slots:[{start:"09:00",end:"14:00"},{start:"16:00",end:"20:00"}]},thursday:{enabled:!0,slots:[{start:"09:00",end:"14:00"},{start:"16:00",end:"20:00"}]},friday:{enabled:!0,slots:[{start:"09:00",end:"14:00"},{start:"16:00",end:"20:00"}]},saturday:{enabled:!1,slots:[]},sunday:{enabled:!1,slots:[]}}});b.useEffect(()=>{s!=null&&s.insuranceData&&u(s.insuranceData)},[s]);const j=t=>{const{name:m,value:C}=t.target;h(S=>({...S,[m]:C}))},N=t=>{g(m=>({...m,[t]:!m[t]}))},A=t=>{const{name:m,value:C}=t.target;n(S=>({...S,[m]:C}))},Y=t=>{u(t),l({insuranceData:t}),c({title:"Configuración actualizada",description:"La información de aseguradoras ha sido actualizada correctamente."})},_=t=>{d(m=>({...m,schedule:t})),c({title:"Horario Actualizado",description:"Tu horario laboral ha sido actualizado correctamente."})},J=t=>{d(m=>({...m,appointmentDuration:t})),c({title:"Duración Actualizada",description:`La duración de las citas ha sido actualizada a ${t} minutos.`})},K=t=>{if(t.preventDefault(),i.newPassword!==i.confirmNewPassword){c({title:"Error",description:"Las nuevas contraseñas no coinciden.",variant:"destructive"});return}if(!i.currentPassword||!i.newPassword){c({title:"Error",description:"Por favor, completa todos los campos de contraseña.",variant:"destructive"});return}console.log("Guardando nueva contraseña (simulado):",i),c({title:"Contraseña Actualizada",description:"Tu contraseña ha sido cambiada con éxito."}),h({currentPassword:"",newPassword:"",confirmNewPassword:""})},Q=t=>{t.preventDefault(),console.log("Guardando configuración de notificaciones (simulado):",o),c({title:"Notificaciones Actualizadas",description:"Tu configuración de notificaciones ha sido guardada."})},X=t=>{t.preventDefault(),console.log("Guardando información de facturación (simulado):",r),c({title:"Facturación Actualizada",description:"Tu información de facturación ha sido guardada."})},k=({id:t,label:m,type:C="text",value:S,onChange:z,name:Z,placeholder:ee,...ae})=>e.jsxs("div",{className:"space-y-1.5",children:[e.jsx(y,{htmlFor:t,className:"text-foreground dark:text-gray-300",children:m}),e.jsx($,{id:t,name:Z||t,type:C,placeholder:ee,value:S,onChange:z,className:"bg-input dark:bg-slate-700 border-border dark:border-gray-600 text-foreground dark:text-white placeholder:text-muted-foreground dark:placeholder:text-gray-500",...ae})]}),T=({id:t,label:m,checked:C,onCheckedChange:S,description:z})=>e.jsxs("div",{className:"flex items-center justify-between space-x-2 py-3 border-b dark:border-gray-700/50 last:border-b-0",children:[e.jsxs("div",{children:[e.jsx(y,{htmlFor:t,className:"font-medium text-foreground dark:text-gray-200",children:m}),z&&e.jsx("p",{className:"text-xs text-muted-foreground dark:text-gray-400",children:z})]}),e.jsx(R,{id:t,checked:C,onCheckedChange:S})]});return e.jsxs(e.Fragment,{children:[e.jsxs("header",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl md:text-4xl font-bold text-foreground dark:text-white",children:"Configuración"}),e.jsx("p",{className:"text-muted-foreground dark:text-gray-400",children:"Gestiona la configuración de tu cuenta y preferencias."})]}),e.jsxs(me,{defaultValue:"security",className:"w-full",children:[e.jsxs(xe,{className:"grid w-full grid-cols-2 md:grid-cols-6 mb-6 bg-muted dark:bg-slate-800 text-muted-foreground dark:text-gray-400",children:[e.jsx(D,{value:"security",className:"data-[state=active]:bg-background dark:data-[state=active]:bg-slate-700 data-[state=active]:text-foreground dark:data-[state=active]:text-white",children:"Seguridad"}),e.jsx(D,{value:"notifications",className:"data-[state=active]:bg-background dark:data-[state=active]:bg-slate-700 data-[state=active]:text-foreground dark:data-[state=active]:text-white",children:"Notificaciones"}),e.jsx(D,{value:"billing",className:"data-[state=active]:bg-background dark:data-[state=active]:bg-slate-700 data-[state=active]:text-foreground dark:data-[state=active]:text-white",children:"Facturación"}),e.jsx(D,{value:"schedule",className:"data-[state=active]:bg-background dark:data-[state=active]:bg-slate-700 data-[state=active]:text-foreground dark:data-[state=active]:text-white",children:"Horario"}),e.jsx(D,{value:"insurance",className:"data-[state=active]:bg-background dark:data-[state=active]:bg-slate-700 data-[state=active]:text-foreground dark:data-[state=active]:text-white",children:"Aseguradoras"}),e.jsx(D,{value:"account",className:"data-[state=active]:bg-background dark:data-[state=active]:bg-slate-700 data-[state=active]:text-foreground dark:data-[state=active]:text-white",children:"Cuenta"})]}),e.jsx(F,{className:"bg-card dark:bg-gray-800/60 border-border dark:border-gray-700/50 shadow-lg",children:e.jsxs(L,{className:"pt-6",children:[e.jsxs(P,{value:"security",children:[e.jsxs(p,{className:"text-xl font-semibold text-foreground dark:text-white mb-1 flex items-center",children:[e.jsx(Ne,{size:20,className:"mr-2 text-primary dark:text-blue-400"}),"Cambiar Contraseña"]}),e.jsx(v,{className:"text-muted-foreground dark:text-gray-400 mb-6",children:"Actualiza tu contraseña regularmente para mayor seguridad."}),e.jsxs("form",{onSubmit:K,className:"space-y-6",children:[e.jsx(k,{id:"currentPassword",name:"currentPassword",label:"Contraseña Actual",type:"password",value:i.currentPassword,onChange:j,placeholder:"Tu contraseña actual"}),e.jsx(k,{id:"newPassword",name:"newPassword",label:"Nueva Contraseña",type:"password",value:i.newPassword,onChange:j,placeholder:"Mínimo 8 caracteres"}),e.jsx(k,{id:"confirmNewPassword",name:"confirmNewPassword",label:"Confirmar Nueva Contraseña",type:"password",value:i.confirmNewPassword,onChange:j,placeholder:"Repite la nueva contraseña"}),e.jsx("div",{className:"flex justify-end",children:e.jsxs(x,{type:"submit",children:[e.jsx(E,{size:16,className:"mr-2"}),"Guardar Contraseña"]})})]}),e.jsx("hr",{className:"my-8 dark:border-gray-700/50"}),e.jsxs(p,{className:"text-xl font-semibold text-foreground dark:text-white mb-1 flex items-center",children:[e.jsx(de,{size:20,className:"mr-2 text-primary dark:text-blue-400"}),"Autenticación de Dos Factores (2FA)"]}),e.jsx(v,{className:"text-muted-foreground dark:text-gray-400 mb-4",children:"Añade una capa extra de seguridad a tu cuenta."}),e.jsx(x,{variant:"outline",className:"dark:text-gray-300 dark:border-gray-600 dark:hover:bg-gray-700",children:"Configurar 2FA (Próximamente)"})]}),e.jsxs(P,{value:"notifications",children:[e.jsxs(p,{className:"text-xl font-semibold text-foreground dark:text-white mb-1 flex items-center",children:[e.jsx(le,{size:20,className:"mr-2 text-primary dark:text-blue-400"}),"Preferencias de Notificación"]}),e.jsx(v,{className:"text-muted-foreground dark:text-gray-400 mb-6",children:"Elige cómo y cuándo quieres recibir notificaciones."}),e.jsxs("form",{onSubmit:Q,className:"space-y-2",children:[e.jsx(T,{id:"emailNewAppointments",label:"Nuevas Citas por Email",checked:o.emailNewAppointments,onCheckedChange:()=>N("emailNewAppointments"),description:"Recibe un email cuando un paciente reserve una nueva cita."}),e.jsx(T,{id:"emailCancellations",label:"Cancelaciones por Email",checked:o.emailCancellations,onCheckedChange:()=>N("emailCancellations"),description:"Recibe un email si una cita es cancelada."}),e.jsx(T,{id:"emailNewMessages",label:"Nuevos Mensajes por Email",checked:o.emailNewMessages,onCheckedChange:()=>N("emailNewMessages"),description:"Recibe un email cuando recibas un nuevo mensaje."}),e.jsx(T,{id:"pushNewAppointments",label:"Notificaciones Push para Nuevas Citas",checked:o.pushNewAppointments,onCheckedChange:()=>N("pushNewAppointments"),description:"Recibe notificaciones push en tu dispositivo (si está soportado)."}),e.jsx("div",{className:"flex justify-end pt-6",children:e.jsxs(x,{type:"submit",children:[e.jsx(E,{size:16,className:"mr-2"}),"Guardar Preferencias"]})})]})]}),e.jsxs(P,{value:"billing",children:[e.jsxs(p,{className:"text-xl font-semibold text-foreground dark:text-white mb-1 flex items-center",children:[e.jsx(oe,{size:20,className:"mr-2 text-primary dark:text-blue-400"}),"Información de Facturación"]}),e.jsx(v,{className:"text-muted-foreground dark:text-gray-400 mb-6",children:"Gestiona tu método de pago y detalles de facturación para tu suscripción."}),e.jsxs("form",{onSubmit:X,className:"space-y-6",children:[e.jsx(k,{id:"billingName",name:"billingName",label:"Nombre en la Tarjeta",value:r.billingName,onChange:A}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx(k,{id:"cardNumber",name:"cardNumber",label:"Número de Tarjeta",value:r.cardNumber,onChange:A,placeholder:"•••• •••• •••• ••••"}),e.jsx(k,{id:"expiryDate",name:"expiryDate",label:"Fecha Caducidad",value:r.expiryDate,onChange:A,placeholder:"MM/YY"}),e.jsx(k,{id:"cvc",name:"cvc",label:"CVC",type:"password",value:r.cvc,onChange:A,placeholder:"•••"})]}),e.jsx(k,{id:"billingAddress",name:"billingAddress",label:"Dirección de Facturación",value:r.billingAddress,onChange:A,placeholder:"Tu dirección completa"}),e.jsx("div",{className:"flex justify-end",children:e.jsxs(x,{type:"submit",children:[e.jsx(E,{size:16,className:"mr-2"}),"Guardar Información de Pago"]})})]}),e.jsx("hr",{className:"my-8 dark:border-gray-700/50"}),e.jsx(p,{className:"text-lg font-semibold text-foreground dark:text-white mb-2",children:"Historial de Facturas"}),e.jsx("p",{className:"text-sm text-muted-foreground dark:text-gray-400",children:"Aquí aparecería tu historial de facturas (Próximamente)."})]}),e.jsxs(P,{value:"schedule",children:[e.jsxs(p,{className:"text-xl font-semibold text-foreground dark:text-white mb-1 flex items-center",children:[e.jsx(ue,{size:20,className:"mr-2 text-primary dark:text-blue-400"}),"Horario Laboral"]}),e.jsx(v,{className:"text-muted-foreground dark:text-gray-400 mb-6",children:"Configura tus horarios de trabajo y la duración de las citas"}),e.jsx(Ce,{schedule:f.schedule,onScheduleChange:_,appointmentDuration:f.appointmentDuration,onAppointmentDurationChange:J})]}),e.jsx(P,{value:"insurance",children:e.jsx(ke,{worksWithInsurance:a.worksWithInsurance,insuranceCompanies:a.insuranceCompanies,onUpdateInsurance:Y})}),e.jsxs(P,{value:"account",children:[e.jsx(p,{className:"text-xl font-semibold text-foreground dark:text-white mb-1",children:"Gestión de Cuenta"}),e.jsx(v,{className:"text-muted-foreground dark:text-gray-400 mb-6",children:"Opciones relacionadas con tu cuenta de usuario."}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-foreground dark:text-gray-200",children:"Exportar Datos"}),e.jsx("p",{className:"text-sm text-muted-foreground dark:text-gray-400",children:"Descarga una copia de tus datos (Próximamente)."}),e.jsx(x,{variant:"outline",className:"mt-2 dark:text-gray-300 dark:border-gray-600 dark:hover:bg-gray-700",children:"Solicitar Exportación"})]}),e.jsx("hr",{className:"dark:border-gray-700/50"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-destructive",children:"Eliminar Cuenta"}),e.jsx("p",{className:"text-sm text-muted-foreground dark:text-gray-400",children:"Esta acción es permanente y no se puede deshacer. Todos tus datos serán eliminados."}),e.jsxs(x,{variant:"destructive",className:"mt-2",children:[e.jsx(U,{size:16,className:"mr-2"})," Solicitar Eliminación de Cuenta (Próximamente)"]})]})]})]})]})})]})]})};export{Ie as default};
