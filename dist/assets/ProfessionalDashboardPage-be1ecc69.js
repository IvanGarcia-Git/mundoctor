import{e as _,R as d,_ as k,D as I,u as P,r as i,j as e,U as T,G as p,H as y,g as o,L as m,s as V,C as n,J as E,K as u,N,O as b,Q as f,o as U,d as x}from"./index-2d2343af.js";import{T as z,a as M,b as v,c as w}from"./tabs-a9bb6abf.js";import{D as O}from"./dollar-sign-5318cb27.js";const q=_("List",[["line",{x1:"8",x2:"21",y1:"6",y2:"6",key:"7ey8pc"}],["line",{x1:"8",x2:"21",y1:"12",y2:"12",key:"rjfblc"}],["line",{x1:"8",x2:"21",y1:"18",y2:"18",key:"c3b1m8"}],["line",{x1:"3",x2:"3.01",y1:"6",y2:"6",key:"1g7gq3"}],["line",{x1:"3",x2:"3.01",y1:"12",y2:"12",key:"1pjlvk"}],["line",{x1:"3",x2:"3.01",y1:"18",y2:"18",key:"28t2mc"}]]),B=d.lazy(()=>k(()=>import("./MonthlyIncomeChart-b15beaa5.js"),["assets/MonthlyIncomeChart-b15beaa5.js","assets/index-2d2343af.js","assets/index-f009cd21.css","assets/LineChart-726ba39f.js"])),F=d.lazy(()=>k(()=>import("./AppointmentsCalendarView-e9cc961b.js"),["assets/AppointmentsCalendarView-e9cc961b.js","assets/index-2d2343af.js","assets/index-f009cd21.css"])),J=()=>{const{user:t}=I(),{toast:c}=P(),[r,C]=i.useState({totalPatients:0,monthlyAppointments:0,averageRating:0,monthlyIncome:0,trends:{patients:"0%",appointments:"0%",rating:"0",income:"0%"}}),[h,D]=i.useState([]),[R,S]=i.useState([]),[L,g]=i.useState(!0);if(i.useEffect(()=>{t&&(async()=>{try{g(!0);const[a,l,j]=await Promise.all([x.getDashboardStats(),x.getDashboardAppointments(3),x.getDashboardReviews(3)]);a.success&&C(a.data),l.success&&D(l.data),j.success&&S(j.data)}catch(a){console.error("Error loading dashboard data:",a),c({title:"Error",description:"No se pudieron cargar los datos del dashboard. Intenta recargar la página.",variant:"destructive"})}finally{g(!1)}})()},[t,c]),L)return e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-primary"})});const A=[{title:"Total Pacientes",value:r.totalPatients.toLocaleString(),trend:r.trends.patients,icon:e.jsx(T,{className:"w-5 h-5 text-blue-500"}),description:"vs. mes anterior"},{title:"Citas del Mes",value:r.monthlyAppointments.toLocaleString(),trend:r.trends.appointments,icon:e.jsx(p,{className:"w-5 h-5 text-green-500"}),description:"vs. mes anterior"},{title:"Valoración Media",value:r.averageRating,trend:r.trends.rating,icon:e.jsx(y,{className:"w-5 h-5 text-yellow-500"}),description:"últimos 30 días"},{title:"Ingresos",value:`€${r.monthlyIncome.toLocaleString()}`,trend:r.trends.income,icon:e.jsx(O,{className:"w-5 h-5 text-emerald-500"}),description:"vs. mes anterior"}];return e.jsxs(e.Fragment,{children:[e.jsxs("header",{className:"mb-8 flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-foreground dark:text-white",children:"Panel de Control"}),e.jsxs("p",{className:"mt-1 text-muted-foreground dark:text-gray-400",children:["Bienvenido de nuevo, ",t==null?void 0:t.firstName," ",(t==null?void 0:t.lastName)||"Dr. Usuario"]})]}),e.jsx(o,{asChild:!0,children:e.jsxs(m,{to:"/profesionales/citas",children:[e.jsx(V,{className:"mr-2 h-4 w-4"}),"Nueva Cita"]})})]}),e.jsx("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2 lg:grid-cols-4 mb-8",children:A.map((s,a)=>e.jsxs(n,{className:"p-6 bg-white dark:bg-gray-800 relative overflow-hidden group",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("div",{className:"p-2 rounded-lg bg-primary/10 dark:bg-primary/20",children:s.icon}),e.jsxs("div",{className:"flex items-center text-sm font-medium text-green-600 dark:text-green-400",children:[e.jsx(E,{className:"w-4 h-4 mr-1"}),s.trend]})]}),e.jsx("h3",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-1",children:s.value}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:s.title}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:s.description})]}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-primary/5 to-primary/0 opacity-0 group-hover:opacity-100 transition-opacity duration-300"})]},a))}),e.jsx("div",{className:"mb-8",children:e.jsx(d.Suspense,{fallback:e.jsx("div",{className:"h-64 flex items-center justify-center",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})}),children:e.jsx(B,{})})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[e.jsx(n,{className:"bg-white dark:bg-gray-800 overflow-hidden",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Citas de Hoy"}),e.jsx(o,{variant:"ghost",size:"sm",asChild:!0,children:e.jsxs(m,{to:"/profesionales/citas",className:"text-primary hover:text-primary/90",children:["Ver todas ",e.jsx(u,{className:"ml-1 h-4 w-4"})]})})]}),e.jsx("div",{className:"space-y-4",children:h.map(s=>e.jsxs("div",{className:"flex items-center justify-between p-4 rounded-lg bg-gray-50 dark:bg-gray-900/50 border border-gray-100 dark:border-gray-700",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs(N,{children:[e.jsx(b,{src:s.patientImage}),e.jsx(f,{children:s.patientName.split(" ").map(a=>a[0]).join("")})]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:s.patientName}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:s.type})]})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(U,{className:"w-4 h-4 mr-1 text-primary"}),e.jsx("span",{className:"text-sm font-medium",children:s.time})]}),e.jsx("div",{className:`px-2.5 py-0.5 rounded-full text-xs font-medium ${s.status==="confirmed"?"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400":"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-400"}`,children:s.status==="confirmed"?"Confirmada":"Pendiente"})]})]},s.id))})]})}),e.jsx(n,{className:"bg-white dark:bg-gray-800 overflow-hidden",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Valoraciones Recientes"}),e.jsx(o,{variant:"ghost",size:"sm",asChild:!0,children:e.jsxs(m,{to:"/profesionales/valoraciones",className:"text-primary hover:text-primary/90",children:["Ver todas ",e.jsx(u,{className:"ml-1 h-4 w-4"})]})})]}),e.jsx("div",{className:"space-y-4",children:R.map(s=>e.jsx("div",{className:"p-4 rounded-lg bg-gray-50 dark:bg-gray-900/50 border border-gray-100 dark:border-gray-700",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsxs(N,{children:[e.jsx(b,{src:s.patientImage}),e.jsx(f,{children:s.patientName.split(" ").map(a=>a[0]).join("")})]}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("h4",{className:"font-medium text-gray-900 dark:text-white",children:s.patientName}),e.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:s.date})]}),e.jsx("div",{className:"flex mb-2",children:Array.from({length:s.rating}).map((a,l)=>e.jsx(y,{className:"w-4 h-4 text-yellow-400 fill-current"},l))}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:s.comment})]})]})},s.id))})]})})]}),e.jsxs("div",{className:"grid gap-6 mb-8",children:[e.jsx("div",{className:"grid gap-4 md:grid-cols-4"}),e.jsxs(z,{defaultValue:"calendar",className:"w-full",children:[e.jsxs(M,{className:"mb-4",children:[e.jsxs(v,{value:"calendar",children:[e.jsx(p,{className:"h-4 w-4 mr-2"}),"Vista Calendario"]}),e.jsxs(v,{value:"list",children:[e.jsx(q,{className:"h-4 w-4 mr-2"}),"Vista Lista"]})]}),e.jsx(w,{value:"calendar",children:e.jsx(d.Suspense,{fallback:e.jsx("div",{className:"h-96 flex items-center justify-center",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})}),children:e.jsx(F,{appointments:h,onDaySelect:s=>{c({title:"Citas para "+s.toLocaleDateString(),description:"Aquí podrás ver los detalles de las citas para este día"})}})})}),e.jsx(w,{value:"list",children:e.jsx(n,{children:e.jsx("div",{className:"divide-y divide-border dark:divide-gray-800"})})})]}),e.jsx("div",{className:"grid gap-4 md:grid-cols-2"})]})]})};export{J as default};
