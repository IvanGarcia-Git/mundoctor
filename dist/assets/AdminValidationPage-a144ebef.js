import{e as z,m as A,r as p,u as R,j as e,n as I,U as j,o as P,p as b,X as c,g as i,E as T,l as n,i as l,S as L}from"./index-9d809e81.js";import{D as M,a as O,b as B,c as q,d as F,e as N}from"./dialog-5e28d78d.js";const U=z("ShieldAlert",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]]),H=()=>{var u,g,h;const{professionals:o,loading:f,updateVerificationStatus:m,getStats:v,refetch:x}=A(),[s,y]=p.useState(null),[k,t]=p.useState(!1),{toast:r}=R(),w=a=>{y(a),t(!0)},D=async a=>{await m(a,"approved","Documentación verificada y aprobada por el administrador.")?(r({title:"Validación Aprobada",description:`La documentación de ${(s==null?void 0:s.fullName)||(s==null?void 0:s.professionalName)} ha sido aprobada. El usuario ya puede acceder a su dashboard.`}),t(!1),x(),setTimeout(()=>{r({title:"Información",description:"Si el profesional está actualmente en línea, deberá refrescar su página para ver los cambios.",variant:"default"})},2e3)):r({title:"Error",description:"No se pudo actualizar el estado de verificación.",variant:"destructive"})},S=async a=>{await m(a,"rejected","Documentación rechazada. Por favor, revise los documentos y vuelva a enviarlos.")?(r({title:"Validación Rechazada",description:`La documentación de ${(s==null?void 0:s.fullName)||(s==null?void 0:s.professionalName)} ha sido rechazada. El usuario será notificado.`,variant:"destructive"}),t(!1),x(),setTimeout(()=>{r({title:"Información",description:"Si el profesional está actualmente en línea, deberá refrescar su página para ver los cambios.",variant:"default"})},2e3)):r({title:"Error",description:"No se pudo actualizar el estado de verificación.",variant:"destructive"})},C=a=>{switch(a){case"pending":return e.jsxs(l,{variant:"warning",className:"bg-yellow-500/20 text-yellow-700 dark:text-yellow-300",children:[e.jsx(U,{className:"mr-1 h-3 w-3"}),"Pendiente"]});case"approved":return e.jsxs(l,{variant:"success",className:"bg-green-500/20 text-green-700 dark:text-green-300",children:[e.jsx(L,{className:"mr-1 h-3 w-3"}),"Aprobado"]});case"rejected":return e.jsxs(l,{variant:"destructive",className:"bg-red-500/20 text-red-700 dark:text-red-300",children:[e.jsx(c,{className:"mr-1 h-3 w-3"}),"Rechazado"]});default:return e.jsx(l,{children:a})}},d=v();return f?e.jsxs("div",{className:"flex justify-center items-center h-64",children:[e.jsx(I,{className:"w-6 h-6 animate-spin mr-2"}),e.jsx("span",{children:"Cargando validaciones..."})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("header",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Validación de Profesionales"}),e.jsx("p",{className:"text-muted-foreground dark:text-gray-400",children:"Revisa y aprueba la documentación de los nuevos profesionales."})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[e.jsx("div",{className:"bg-card dark:bg-gray-800/60 p-4 rounded-lg border border-border dark:border-gray-700/50",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(j,{className:"h-8 w-8 text-blue-500 mr-3"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold",children:d.total}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Total"})]})]})}),e.jsx("div",{className:"bg-card dark:bg-gray-800/60 p-4 rounded-lg border border-border dark:border-gray-700/50",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(P,{className:"h-8 w-8 text-yellow-500 mr-3"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold",children:d.pending}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Pendientes"})]})]})}),e.jsx("div",{className:"bg-card dark:bg-gray-800/60 p-4 rounded-lg border border-border dark:border-gray-700/50",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(b,{className:"h-8 w-8 text-green-500 mr-3"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold",children:d.approved}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Aprobados"})]})]})}),e.jsx("div",{className:"bg-card dark:bg-gray-800/60 p-4 rounded-lg border border-border dark:border-gray-700/50",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(c,{className:"h-8 w-8 text-red-500 mr-3"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold",children:d.rejected}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Rechazados"})]})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[o.map(a=>e.jsxs("div",{className:"bg-card dark:bg-gray-800/60 backdrop-blur-md p-5 rounded-xl border border-border dark:border-gray-700/50 shadow-lg",children:[e.jsxs("div",{className:"flex justify-between items-start mb-3",children:[e.jsx("h2",{className:"text-lg font-semibold text-foreground dark:text-white",children:a.fullName||a.professionalName}),C(a.status)]}),e.jsxs("p",{className:"text-sm text-muted-foreground dark:text-gray-400 mb-1",children:[e.jsx("span",{className:"font-medium",children:"Email:"})," ",a.email]}),e.jsxs("p",{className:"text-sm text-muted-foreground dark:text-gray-400 mb-1",children:[e.jsx("span",{className:"font-medium",children:"Colegiado:"})," ",a.collegiateNumber]}),e.jsxs("p",{className:"text-sm text-muted-foreground dark:text-gray-400 mb-1",children:[e.jsx("span",{className:"font-medium",children:"DNI:"})," ",a.dni]}),e.jsxs("p",{className:"text-sm text-muted-foreground dark:text-gray-400 mb-4",children:[e.jsx("span",{className:"font-medium",children:"Enviado:"})," ",new Date(a.submittedAt).toLocaleDateString("es-ES")]}),a.notes&&e.jsxs("p",{className:"text-xs italic text-amber-600 dark:text-amber-400 mb-3 p-2 bg-amber-500/10 rounded-md",children:["Nota: ",a.notes]}),e.jsx("div",{className:"flex gap-2 justify-end",children:e.jsxs(i,{variant:"outline",size:"sm",onClick:()=>w(a),children:[e.jsx(T,{className:"mr-1.5 h-4 w-4"})," Revisar"]})})]},a.id)),o.length===0&&e.jsxs("div",{className:"col-span-full text-center py-10",children:[e.jsx(j,{className:"w-16 h-16 mx-auto text-muted-foreground mb-4"}),e.jsx("p",{className:"text-muted-foreground dark:text-gray-400 text-lg",children:"No hay validaciones registradas"}),e.jsx("p",{className:"text-sm text-muted-foreground dark:text-gray-500",children:"Los profesionales aparecerán aquí cuando se registren"})]})]}),s&&e.jsx(M,{open:k,onOpenChange:t,children:e.jsxs(O,{className:"bg-card dark:bg-gray-800 text-foreground dark:text-white border-border dark:border-gray-700",children:[e.jsxs(B,{children:[e.jsxs(q,{className:"text-xl",children:["Revisar Documentación: ",s.fullName]}),e.jsxs(F,{className:"text-muted-foreground dark:text-gray-400",children:["Documentación profesional - Enviado el ",new Date(s.submittedAt).toLocaleDateString("es-ES")]})]}),e.jsxs("div",{className:"py-4 space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold",children:"Profesional:"})," ",s.fullName]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold",children:"Email:"})," ",s.email]})]}),e.jsxs("div",{children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold",children:"Número de Colegiado:"})," ",s.collegiateNumber]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold",children:"DNI:"})," ",s.dni]})]})]}),e.jsxs("div",{className:"border-t pt-4",children:[e.jsx("h4",{className:"font-semibold mb-3",children:"Documentos Enviados:"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[e.jsxs("div",{className:"p-3 bg-muted/50 dark:bg-gray-700/50 rounded-md text-center",children:[e.jsx(n,{size:32,className:"mx-auto text-primary dark:text-blue-400 mb-2"}),e.jsx("p",{className:"text-sm font-medium",children:"Imagen DNI"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:((u=s.documentsSubmitted)==null?void 0:u.dniImage)||"documento_dni.pdf"})]}),e.jsxs("div",{className:"p-3 bg-muted/50 dark:bg-gray-700/50 rounded-md text-center",children:[e.jsx(n,{size:32,className:"mx-auto text-primary dark:text-blue-400 mb-2"}),e.jsx("p",{className:"text-sm font-medium",children:"Titulación"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:((g=s.documentsSubmitted)==null?void 0:g.universityDegree)||"titulacion.pdf"})]}),e.jsxs("div",{className:"p-3 bg-muted/50 dark:bg-gray-700/50 rounded-md text-center",children:[e.jsx(n,{size:32,className:"mx-auto text-primary dark:text-blue-400 mb-2"}),e.jsx("p",{className:"text-sm font-medium",children:"Colegiación"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:((h=s.documentsSubmitted)==null?void 0:h.collegiationCertificate)||"colegiacion.pdf"})]})]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-2 text-center",children:"En una implementación real, aquí estarían los enlaces para descargar los documentos"})]}),s.notes&&e.jsxs("p",{className:"text-xs italic text-amber-600 dark:text-amber-400 mt-3 p-2 bg-amber-500/10 rounded-md",children:["Nota existente: ",s.notes]})]}),s.status==="pending"&&e.jsxs(N,{className:"gap-2 sm:justify-end",children:[e.jsxs(i,{variant:"destructive",onClick:()=>S(s.id),children:[e.jsx(c,{className:"mr-1.5 h-4 w-4"})," Rechazar"]}),e.jsxs(i,{className:"bg-green-600 hover:bg-green-700 text-white",onClick:()=>D(s.id),children:[e.jsx(b,{className:"mr-1.5 h-4 w-4"})," Aprobar"]})]}),s.status!=="pending"&&e.jsx(N,{children:e.jsx(i,{variant:"outline",onClick:()=>t(!1),children:"Cerrar"})})]})})]})};export{H as default};
