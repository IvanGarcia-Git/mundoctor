import{u as G,r as t,j as e,R as b,C as p,a as j,b as f,U as i,c as k,L as K,d as V,B as y,S as N,T as F,P as q}from"./index-2d2343af.js";import{R as v,L as C,C as S,X as w,Y as A,T as D,a as L}from"./LineChart-726ba39f.js";import{B as n}from"./bar-chart-2-b2cf51da.js";const Y=()=>{const{toast:c}=G(),[R,z]=t.useState([]),[l,B]=t.useState({users:[],subscriptions:[]}),[E,m]=t.useState(!0);t.useEffect(()=>{(async()=>{var x,u,h;try{m(!0);const a=await V.getDashboardStats();if(a.success){const r=a.data,M=[{title:"Usuarios Registrados",value:((x=r.total_users)==null?void 0:x.toLocaleString())||"0",icon:e.jsx(i,{className:"text-blue-500"}),color:"blue"},{title:"Profesionales Activos",value:((u=r.total_professionals)==null?void 0:u.toLocaleString())||"0",icon:e.jsx(y,{className:"text-green-500"}),color:"green"},{title:"Suscripciones Activas",value:"280",icon:e.jsx(n,{className:"text-purple-500"}),color:"purple"},{title:"Validaciones Pendientes",value:((h=r.pendingValidations)==null?void 0:h.toString())||"0",icon:e.jsx(N,{className:"text-red-500"}),color:"red"}];if(z(M),r.usersByMonth&&r.subscriptionsByMonth){const g=["Ene","Feb","Mar","Abr","May","Jun"],P=r.usersByMonth.map((o,d)=>({mes:g[d],usuarios:o})),U=r.subscriptionsByMonth.map((o,d)=>({mes:g[d],suscripciones:o}));B({users:P,subscriptions:U})}}else throw new Error(a.message||"Failed to load dashboard stats")}catch(a){console.error("Error loading admin dashboard data:",a),c({title:"Error",description:"No se pudieron cargar los datos del dashboard. Intenta recargar la página.",variant:"destructive"})}finally{m(!1)}})()},[c]);const T=[{name:"Gestionar Usuarios",path:"/admin/usuarios",icon:e.jsx(i,{size:20})},{name:"Validar Profesionales",path:"/admin/validaciones",icon:e.jsx(N,{size:20})},{name:"Ver Suscripciones",path:"/admin/suscripciones",icon:e.jsx(y,{size:20})},{name:"Gestionar Tickets",path:"/admin/tickets",icon:e.jsx(F,{size:20})},{name:"Gestionar Descuentos",path:"/admin/descuentos",icon:e.jsx(q,{size:20})}];return E?e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-primary"})}):e.jsxs(e.Fragment,{children:[e.jsxs("header",{className:"mb-10",children:[e.jsx("h1",{className:"text-3xl md:text-4xl font-bold mb-2",children:"Panel de Administración"}),e.jsx("p",{className:"text-muted-foreground dark:text-gray-400",children:"Bienvenido al centro de control de Mundoctor."})]}),e.jsx("section",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6 mb-10",children:R.map(s=>e.jsxs("div",{className:"bg-card dark:bg-gray-800/60 backdrop-blur-md p-6 rounded-xl border border-border dark:border-gray-700/50 shadow-lg hover:shadow-xl transition-shadow",children:[e.jsx("div",{className:`p-3 inline-block bg-${s.color}-500/10 rounded-lg mb-3`,children:b.cloneElement(s.icon,{size:28})}),e.jsx("h3",{className:"text-2xl font-bold text-foreground dark:text-white mb-1",children:s.value}),e.jsx("p",{className:"text-sm text-muted-foreground dark:text-gray-400",children:s.title})]},s.title))}),e.jsxs("section",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 mb-10",children:[e.jsxs(p,{className:"bg-card dark:bg-gray-800/60 border-border dark:border-gray-700/50 shadow-lg",children:[e.jsx(j,{children:e.jsxs(f,{className:"text-lg font-semibold flex items-center gap-2",children:[e.jsx(i,{className:"text-blue-500",size:22})," Usuarios registrados por mes"]})}),e.jsx(k,{children:e.jsx("div",{className:"h-[260px] mt-2",children:e.jsx(v,{width:"100%",height:"100%",children:e.jsxs(C,{data:l.users,children:[e.jsx(S,{strokeDasharray:"3 3",className:"stroke-muted dark:stroke-gray-700"}),e.jsx(w,{dataKey:"mes",className:"text-muted-foreground dark:text-gray-400"}),e.jsx(A,{className:"text-muted-foreground dark:text-gray-400"}),e.jsx(D,{contentStyle:{backgroundColor:"hsl(var(--card))",border:"1px solid hsl(var(--border))",borderRadius:"0.5rem"},formatter:s=>[s,"Usuarios"]}),e.jsx(L,{type:"monotone",dataKey:"usuarios",stroke:"#3b82f6",strokeWidth:2,dot:{fill:"#3b82f6"}})]})})})})]}),e.jsxs(p,{className:"bg-card dark:bg-gray-800/60 border-border dark:border-gray-700/50 shadow-lg",children:[e.jsx(j,{children:e.jsxs(f,{className:"text-lg font-semibold flex items-center gap-2",children:[e.jsx(n,{className:"text-purple-500",size:22})," Suscripciones activas por mes"]})}),e.jsx(k,{children:e.jsx("div",{className:"h-[260px] mt-2",children:e.jsx(v,{width:"100%",height:"100%",children:e.jsxs(C,{data:l.subscriptions,children:[e.jsx(S,{strokeDasharray:"3 3",className:"stroke-muted dark:stroke-gray-700"}),e.jsx(w,{dataKey:"mes",className:"text-muted-foreground dark:text-gray-400"}),e.jsx(A,{className:"text-muted-foreground dark:text-gray-400"}),e.jsx(D,{contentStyle:{backgroundColor:"hsl(var(--card))",border:"1px solid hsl(var(--border))",borderRadius:"0.5rem"},formatter:s=>[s,"Suscripciones"]}),e.jsx(L,{type:"monotone",dataKey:"suscripciones",stroke:"#a21caf",strokeWidth:2,dot:{fill:"#a21caf"}})]})})})})]})]}),e.jsxs("section",{className:"mb-10",children:[e.jsx("h2",{className:"text-2xl font-semibold mb-6",children:"Accesos Rápidos"}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4",children:T.map(s=>e.jsxs(K,{to:s.path,className:"bg-card dark:bg-gray-800/60 backdrop-blur-md p-5 rounded-lg border border-border dark:border-gray-700/50 shadow-md hover:border-primary dark:hover:border-blue-500 transition-colors flex items-center space-x-3",children:[b.cloneElement(s.icon,{className:"text-primary dark:text-blue-400"}),e.jsx("span",{className:"text-foreground dark:text-white font-medium",children:s.name})]},s.name))})]}),e.jsxs("section",{children:[e.jsx("h2",{className:"text-2xl font-semibold mb-6",children:"Actividad Reciente"}),e.jsxs("div",{className:"bg-card dark:bg-gray-800/60 backdrop-blur-md p-6 rounded-xl border border-border dark:border-gray-700/50 shadow-lg",children:[e.jsx("p",{className:"text-muted-foreground dark:text-gray-400",children:"Aquí se mostraría un resumen de la actividad reciente, como nuevos registros, suscripciones, o validaciones completadas. También podrían incluirse gráficos de tendencias."}),e.jsx("div",{className:"mt-6 h-64 bg-muted/30 dark:bg-gray-700/30 rounded-md flex items-center justify-center",children:e.jsx(n,{size:48,className:"text-muted-foreground/50 dark:text-gray-600"})})]})]})]})};export{Y as default};
