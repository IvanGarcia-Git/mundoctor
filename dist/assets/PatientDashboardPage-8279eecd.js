import{a8 as C,u as D,r as t,j as e,L as P,C as d,c as i,R,a as g,b as h,U as S,q as u,N as A,O as E,Q as V,s as p,d as j,H as z}from"./index-7f476d33.js";const I=()=>{const{user:s}=C(),{toast:l}=D(),[f,b]=t.useState([]),[N,k]=t.useState([]),[n,y]=t.useState([]),[v,o]=t.useState(!0);return t.useEffect(()=>{s&&(async()=>{var c;try{o(!0);const[r,x]=await Promise.all([j.getDashboardStats(),j.getDashboardAppointments(5)]);if(r.success){const m=r.data,w=[{title:"Próxima Cita",value:m.nextAppointment||"15 Junio",description:"Dr. Carlos Soler - Cardiología",icon:e.jsx(p,{className:"text-blue-500"}),color:"blue",link:"/paciente/citas"},{title:"Reseñas Realizadas",value:((c=m.reviewsCount)==null?void 0:c.toString())||"5",description:"Valoraciones enviadas",icon:e.jsx(z,{className:"text-yellow-500"}),color:"yellow",link:"/paciente/resenas"}];b(w)}x.success&&y(x.data),k([{id:"doc1",name:"Dr. Carlos Soler",specialty:"Cardiología",avatar:"https://ui.shadcn.com/avatars/01.png",lastVisit:"2025-05-20"},{id:"doc2",name:"Dra. Ana García",specialty:"Dermatología",avatar:"https://ui.shadcn.com/avatars/02.png",lastVisit:"2025-05-15"}])}catch(r){console.error("Error loading patient dashboard data:",r),l({title:"Error",description:"No se pudieron cargar los datos del dashboard. Intenta recargar la página.",variant:"destructive"})}finally{o(!1)}})()},[s,l]),v?e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-primary"})}):e.jsxs(e.Fragment,{children:[e.jsxs("header",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl md:text-4xl font-bold text-foreground dark:text-white",children:"Mi Panel de Paciente"}),e.jsxs("p",{className:"text-muted-foreground dark:text-gray-400",children:["Bienvenido/a, ",(s==null?void 0:s.name)||"Usuario","."]})]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6 mb-8",children:f.map(a=>e.jsx(P,{to:a.link,children:e.jsx(d,{className:"bg-card dark:bg-gray-800/60 border-border dark:border-gray-700/50 shadow-lg hover:shadow-xl transition-shadow",children:e.jsxs(i,{className:"p-6",children:[e.jsx("div",{className:`p-3 inline-block bg-${a.color}-500/10 rounded-lg mb-3`,children:R.cloneElement(a.icon,{size:28})}),e.jsx("h3",{className:"text-2xl font-bold text-foreground dark:text-white mb-1",children:a.value}),e.jsx("p",{className:"text-sm text-muted-foreground dark:text-gray-400",children:a.title}),e.jsx("p",{className:"text-xs text-muted-foreground dark:text-gray-500 mt-1",children:a.description})]})})},a.title))}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[e.jsxs(d,{className:"bg-card dark:bg-gray-800/60 border-border dark:border-gray-700/50 shadow-lg",children:[e.jsxs(g,{children:[e.jsxs(h,{className:"text-foreground dark:text-white flex items-center",children:[e.jsx(S,{size:20,className:"mr-2 text-primary dark:text-blue-400"}),"Últimos Profesionales Visitados"]}),e.jsx(u,{className:"text-muted-foreground dark:text-gray-400",children:"Profesionales con los que has tenido cita recientemente"})]}),e.jsx(i,{children:e.jsx("div",{className:"space-y-4",children:N.map(a=>e.jsxs("div",{className:"flex items-center justify-between p-4 rounded-lg bg-muted/50 dark:bg-gray-700/30",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs(A,{children:[e.jsx(E,{src:a.avatar}),e.jsx(V,{children:"DR"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-foreground dark:text-white",children:a.name}),e.jsx("p",{className:"text-sm text-muted-foreground dark:text-gray-400",children:a.specialty})]})]}),e.jsxs("p",{className:"text-sm text-muted-foreground dark:text-gray-400",children:["Última visita: ",a.lastVisit]})]},a.id))})})]}),e.jsxs(d,{className:"bg-card dark:bg-gray-800/60 border-border dark:border-gray-700/50 shadow-lg",children:[e.jsxs(g,{children:[e.jsxs(h,{className:"text-foreground dark:text-white flex items-center",children:[e.jsx(p,{size:20,className:"mr-2 text-primary dark:text-blue-400"}),"Próximas Citas"]}),e.jsx(u,{className:"text-muted-foreground dark:text-gray-400",children:"Tus próximas citas programadas"})]}),e.jsx(i,{children:n.length>0?e.jsx("div",{className:"space-y-4",children:n.map(a=>e.jsxs("div",{className:"flex items-center justify-between p-4 rounded-lg bg-muted/50 dark:bg-gray-700/30",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-foreground dark:text-white",children:a.professionalName||"Dr. García"}),e.jsx("p",{className:"text-sm text-muted-foreground dark:text-gray-400",children:a.specialty||"Cardiología"})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-sm font-medium text-foreground dark:text-white",children:a.time}),e.jsx("p",{className:"text-xs text-muted-foreground dark:text-gray-400",children:a.date})]})]},a.id))}):e.jsx("div",{className:"text-center text-muted-foreground dark:text-gray-400 py-8",children:"No tienes citas programadas"})})]})]})]})};export{I as default};
